<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Padel Dashboard</title>

  <style>
    :root{
      --bg:#f6f2e9;
      --card:#ffffff;
      --ink:#1a1a1a;
      --muted:#5f6a5f;
      --line:rgba(0,0,0,.10);

      --padelGreen:#1f8a5b;
      --clay:#e9a56a;
      --ball:#d8ff3f;
      --ballShadow: rgba(0,0,0,.15);

      --radius:18px;
    }

    *{box-sizing:border-box}

    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
      color:var(--ink);
      background:
        radial-gradient(900px 500px at 12% 0%, rgba(47,191,113,.18), transparent 55%),
        radial-gradient(900px 500px at 88% 20%, rgba(233,165,106,.22), transparent 58%),
        linear-gradient(180deg, #faf7f1, var(--bg));
      padding:22px;
    }

    /* ---------- Flying balls layer (Vordergrund) ---------- */
    #ballLayer{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:50;         /* VORDERGRUND */
      overflow:hidden;
    }

    .wrap{max-width:1100px;margin:0 auto; position:relative; z-index:2;}

    .header{
      display:flex;align-items:center;gap:12px;
      margin-bottom:14px;
    }

    /* Logo (emoji) */
    .logoBall{
      display:flex;
      align-items:center;
      justify-content:center;
      width:44px;
      height:44px;
      border-radius:999px;
      font-size:30px;
      background: radial-gradient(circle at 30% 28%, #fff, rgba(216,255,63,.95) 55%, rgba(182,228,0,.85) 95%);
      border:1px solid rgba(0,0,0,.08);
      box-shadow: 0 10px 18px var(--ballShadow);
      user-select:none;
      flex:0 0 auto;
    }

    h1{margin:0;font-size:22px;letter-spacing:.2px}

    .card{
      background: var(--card);
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: 0 10px 25px rgba(0,0,0,.08);
      overflow:hidden;
    }

    /* LIVE */
    .live{
      position:relative;
      padding:18px;
      border-radius: var(--radius);
      border:1px solid rgba(31,138,91,.18);
      background:
        linear-gradient(180deg, rgba(47,191,113,.12), rgba(233,165,106,.08)),
        #fff;
      overflow:hidden;
      margin-bottom:14px;
    }
    .courtLines{
      position:absolute;inset:-40px;
      opacity:.18;
      pointer-events:none;
      background:
        linear-gradient(90deg, transparent 0 16%, rgba(31,138,91,.35) 16% 16.4%, transparent 16.4% 33%,
                               rgba(31,138,91,.35) 33% 33.4%, transparent 33.4% 66%,
                               rgba(31,138,91,.35) 66% 66.4%, transparent 66.4% 84%,
                               rgba(31,138,91,.35) 84% 84.4%, transparent 84.4% 100%),
        linear-gradient(0deg, transparent 0 20%, rgba(31,138,91,.35) 20% 20.4%, transparent 20.4% 50%,
                              rgba(31,138,91,.35) 50% 50.4%, transparent 50.4% 80%,
                              rgba(31,138,91,.35) 80% 80.4%, transparent 80.4% 100%);
      transform: rotate(-6deg);
    }
    .liveTop{position:relative}
    .liveTitle{
      font-weight:950;
      font-size:17px;
      margin:0;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .liveHint{
      margin-top:6px;
      color:var(--muted);
      font-size:12px;
      position:relative;
    }

    .grid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:12px;
      margin-top:14px;
      position:relative;
    }
    @media (max-width:860px){ .grid{grid-template-columns:1fr} }

    .tile{
      border:1px solid rgba(0,0,0,.08);
      background: rgba(255,255,255,.75);
      border-radius:16px;
      padding:12px 12px;
      position:relative;
    }
    .k{color:var(--muted);font-size:11px;margin-bottom:6px}
    .v{font-size:18px;font-weight:950;letter-spacing:.2px}
    .big{font-size:20px}

    .code{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-weight:950;
      letter-spacing:.8px;
      font-size:22px;
    }

    /* -------- Floating Smiley -------- */
    .floatSmiley{
      position:absolute;
      right:14px;
      top:14px;
      width:46px;
      height:46px;
      border-radius:999px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:22px;
      background: radial-gradient(circle at 30% 28%, #fff, rgba(216,255,63,.95) 55%, rgba(182,228,0,.85) 95%);
      border:1px solid rgba(0,0,0,.08);
      box-shadow: 0 10px 22px rgba(0,0,0,.12);
      animation: floaty 3.2s ease-in-out infinite;
      user-select:none;
      pointer-events:none;
      transform: translateZ(0);
    }
    .floatSmiley:after{
      content:"";
      position:absolute;
      inset:-10px;
      border-radius:999px;
      background: radial-gradient(circle, rgba(31,138,91,.18), transparent 60%);
      filter: blur(2px);
      opacity:.55;
      z-index:-1;
    }
    @keyframes floaty{
      0%,100%{ transform: translateY(0px); }
      50%{ transform: translateY(-6px); }
    }

    @media (max-width:700px){
      .floatSmiley{
        width:100px;height:100px;
        font-size:70px;
        right:12px; top:12px;
      }
    }

    /* TABLE / LIST */
    .tableHead{
      padding:14px 16px 6px 16px;
      display:flex;justify-content:space-between;align-items:flex-end;gap:10px;flex-wrap:wrap;
    }
    .tableTitle{font-weight:950;font-size:16px}
    .tableSub{
      padding:0 16px 10px 16px;
      font-size:12px;color:var(--muted);
    }

    .scroll{max-height:520px;overflow:auto}

    table{
      width:100%;
      border-collapse:separate;
      border-spacing:0;
      border-top:1px solid var(--line);
      background:#fff;
    }
    thead th{
      text-align:left;
      font-size:12px;
      color:var(--muted);
      padding:12px 12px;
      border-bottom:1px solid var(--line);
      background: rgba(31,138,91,.06);
      position:sticky;
      top:0;
      z-index:1;
    }
    tbody td{
      padding:11px 12px;
      border-bottom:1px solid rgba(0,0,0,.06);
      font-size:13px;
      vertical-align:middle;
    }
    tbody tr:hover{background: rgba(47,191,113,.06)}
    tbody tr.highlight{
      background: rgba(216,255,63,.25);
      outline:2px solid rgba(31,138,91,.35);
      outline-offset:-2px;
    }

    .chip{
      display:inline-flex;align-items:center;
      padding:6px 10px;border-radius:999px;
      border:1px solid rgba(0,0,0,.08);
      font-weight:950;font-size:12px;
      background: rgba(31,138,91,.10);
      color:#145a3b;
      white-space:nowrap;
    }
    .chip.buelach{background: rgba(233,165,106,.18); color:#7a3f10;}
    .nowrap{white-space:nowrap}
    .muted{color:var(--muted)}

    /* ---------- MOBILE: Table -> Cards (kein sideways scroll) ---------- */
    @media (max-width: 520px){
      body{padding:16px}
      h1{font-size:20px}

      .v{font-size:18px}     /* Luca: .v = 18 */
      .big{font-size:20px}   /* Luca: .big = 20 */
      .code{font-size:20px}

      .scroll{max-height:none; overflow:visible;}
      table, thead, tbody, th, td, tr{display:block;}
      thead{display:none;}
      table{border-top:none;}
      tbody td{border:none; padding:0;}

      tbody tr{
        margin:10px 12px 12px 12px;
        border:1px solid rgba(0,0,0,.10);
        border-radius:16px;
        padding:12px;
        background:#fff;
        box-shadow: 0 8px 18px rgba(0,0,0,.06);
      }
      tbody tr:hover{background:#fff}
      tbody tr.highlight{
        background: rgba(216,255,63,.22);
        outline:2px solid rgba(31,138,91,.30);
        outline-offset:-2px;
      }

      .mRow{
        display:grid;
        grid-template-columns: 110px 1fr;
        gap:8px 10px;
        align-items:center;
      }
      .mLabel{
        color:var(--muted);
        font-size:11px;
        font-weight:700;
      }
      .mValue{
        font-size:13px;
        font-weight:800;
      }
      .mCode{
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
        font-weight:950;
        letter-spacing:.6px;
      }

      .chip{font-size:11px;padding:5px 9px}
    }

    /* ---------- Flying balls visuals ---------- */
    .flyBall{
      position:absolute;
      width:34px;
      height:34px;
      border-radius:999px;
      background: radial-gradient(circle at 30% 28%, #fff, var(--ball) 45%, #b6e400 80%);
      box-shadow: 0 10px 18px rgba(0,0,0,.12);
      border: 1px solid rgba(0,0,0,.06);
      will-change: transform;
      opacity:.92;
      transform: translate3d(0,0,0);
      filter: saturate(1.03);
    }
    .flyBall:before,.flyBall:after{
      content:"";
      position:absolute;inset:5px;
      border-radius:999px;
      border:2px solid rgba(0,0,0,.14);
      clip-path: polygon(0 0, 100% 0, 100% 42%, 0 42%);
      transform: rotate(-18deg);
      opacity:.9;
    }
    .flyBall:after{
      clip-path: polygon(0 58%, 100% 58%, 100% 100%, 0 100%);
      transform: rotate(-18deg);
    }
    @media (max-width:520px){
      .flyBall{ width:28px; height:28px; }
    }
    @media (prefers-reduced-motion: reduce){
      #ballLayer{ display:none; }
    }
  </style>
</head>

<body>
  <!-- Flying balls (Vordergrund) -->
  <div id="ballLayer" aria-hidden="true"></div>

  <div class="wrap">

    <div class="header">
      <div class="logoBall">ðŸŽ¾</div>
      <h1>Padel Dashboard</h1>
    </div>

    <!-- LIVE -->
    <div class="card live">
      <div class="courtLines" aria-hidden="true"></div>

      <div class="liveTop">
        <div class="liveTitle">NÃ¤chstes Spiel</div>
        <div class="liveHint">Wechselt nach 21:00 Uhr am Spieltag.</div>
      </div>

      <div class="grid">
        <div class="tile">
          <div class="k">Ort & Court</div>
          <div class="v big" id="liveWhere">â€”</div>
        </div>

        <div class="tile">
          <div class="floatSmiley" aria-hidden="true">ðŸ˜„</div>

          <div class="k">Datum & Zeit</div>
          <div class="v big" id="liveWhen">â€”</div>

          <div style="margin-top:10px">
            <div class="k" id="countdownLabel">Start in</div>
            <div class="v big" id="liveCountdown">â€”</div>
          </div>
        </div>

        <div class="tile" style="grid-column:1 / -1">
          <div class="k">Zugangscode (nur BÃ¼lach)</div>
          <div class="code" id="liveCode">â€”</div>
        </div>
      </div>
    </div>

    <!-- LIST -->
    <div class="card">
      <div class="tableHead">
        <div class="tableTitle">Bevorstehende Spiele</div>
      </div>
      <div class="tableSub">Vergangene Spiele werden ausgeblendet.</div>

      <div class="scroll">
        <table>
          <thead>
            <tr>
              <th>Ort</th>
              <th>Court</th>
              <th>Datum</th>
              <th>Zugangscode</th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>
      </div>
    </div>

  </div>

<script>
  // Daten: ISO lokal (ohne Z)
  const games = [
    // Milandia (Court 3)
    { city:"Milandia", court:"Court 3", start:"2025-12-18T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-01-08T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-01-22T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-02-05T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-02-19T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-03-05T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-03-19T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-04-02T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-04-16T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-04-30T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-05-14T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-05-28T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-06-11T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-06-25T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-07-09T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-07-23T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-08-06T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-08-20T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-09-03T19:00:00", code:"" },

    // BÃ¼lach (Court 1) + Zugangscode
    { city:"BÃ¼lach", court:"Court 1", start:"2026-02-12T19:00:00", code:"8411#" },
    { city:"BÃ¼lach", court:"Court 1", start:"2026-02-26T19:00:00", code:"6868#" },
    { city:"BÃ¼lach", court:"Court 1", start:"2026-03-12T19:00:00", code:"8143#" },
    { city:"BÃ¼lach", court:"Court 1", start:"2026-03-26T19:00:00", code:"8126#" },
    { city:"BÃ¼lach", court:"Court 1", start:"2026-04-09T19:00:00", code:"5726#" },
    { city:"BÃ¼lach", court:"Court 1", start:"2026-04-23T19:00:00", code:"4125#" },
    { city:"BÃ¼lach", court:"Court 1", start:"2026-05-07T19:00:00", code:"9478#" },
    { city:"BÃ¼lach", court:"Court 1", start:"2026-05-21T19:00:00", code:"5758#" },
    { city:"BÃ¼lach", court:"Court 1", start:"2026-06-04T19:00:00", code:"8265#" },
    { city:"BÃ¼lach", court:"Court 1", start:"2026-06-18T19:00:00", code:"3703#" },
    { city:"BÃ¼lach", court:"Court 1", start:"2026-07-02T19:00:00", code:"2012#" },
    { city:"BÃ¼lach", court:"Court 1", start:"2026-07-16T19:00:00", code:"2878#" },
    { city:"BÃ¼lach", court:"Court 1", start:"2026-07-30T19:00:00", code:"7170#" },
    { city:"BÃ¼lach", court:"Court 1", start:"2026-08-13T19:00:00", code:"9432#" },
    { city:"BÃ¼lach", court:"Court 1", start:"2026-08-27T19:00:00", code:"2750#" },
    { city:"BÃ¼lach", court:"Court 1", start:"2026-09-10T19:00:00", code:"5646#" },
    { city:"BÃ¼lach", court:"Court 1", start:"2026-09-24T19:00:00", code:"6603#" },
    { city:"BÃ¼lach", court:"Court 1", start:"2026-10-08T19:00:00", code:"3112#" },
  ];

  // Helpers
  const pad2 = n => String(n).padStart(2,"0");
  const parseLocal = iso => new Date(iso);

  function formatCHDateTime(d){
    return `${pad2(d.getDate())}.${pad2(d.getMonth()+1)}.${d.getFullYear()} ${pad2(d.getHours())}:${pad2(d.getMinutes())}`;
  }

  function countdownString(ms){
    const s = Math.max(0, Math.floor(ms/1000));
    const days = Math.floor(s / 86400);
    const hours = Math.floor((s % 86400) / 3600);
    const mins = Math.floor((s % 3600) / 60);
    const secs = s % 60;

    if (days > 0) return `${days}d ${hours}h ${mins}m ${secs}s`;
    if (hours > 0) return `${hours}h ${mins}m ${secs}s`;
    if (mins > 0) return `${mins}m ${secs}s`;
    return `${secs}s`;
  }

  function displayUntil(startDate){
    const d = new Date(startDate.getTime());
    d.setHours(21,0,0,0);
    return d;
  }

  const sorted = games
    .map(g => ({...g, startDate: parseLocal(g.start)}))
    .sort((a,b) => a.startDate - b.startDate);

  // DOM
  const liveWhere = document.getElementById("liveWhere");
  const liveWhen = document.getElementById("liveWhen");
  const liveCountdown = document.getElementById("liveCountdown");
  const countdownLabel = document.getElementById("countdownLabel");
  const liveCode = document.getElementById("liveCode");
  const tbody = document.getElementById("tbody");

  function findActive(now){
    for (const g of sorted){
      if (now < displayUntil(g.startDate)) return g;
    }
    return null;
  }

  function isMobileCards(){
    return window.matchMedia && window.matchMedia("(max-width: 520px)").matches;
  }

  function renderUpcoming(now, highlightKey){
    tbody.innerHTML = "";
    const upcoming = sorted.filter(g => now < displayUntil(g.startDate));

    if (upcoming.length === 0){
      const tr = document.createElement("tr");
      tr.innerHTML = `<td colspan="4" class="muted">Keine kommenden Spiele in der Liste.</td>`;
      tbody.appendChild(tr);
      return;
    }

    const cards = isMobileCards();

    for (const g of upcoming){
      const tr = document.createElement("tr");
      const key = `${g.city}|${g.start}`;
      if (highlightKey && key === highlightKey) tr.classList.add("highlight");

      const chipClass = g.city === "BÃ¼lach" ? "buelach" : "";
      const code = (g.city === "BÃ¼lach") ? (g.code || "TBD") : "â€”";

      if (!cards){
        tr.innerHTML = `
          <td><span class="chip ${chipClass}">${g.city}</span></td>
          <td class="nowrap">${g.court}</td>
          <td class="nowrap">${formatCHDateTime(g.startDate)}</td>
          <td class="nowrap">${g.city === "BÃ¼lach"
              ? (g.code ? `<span class="code" style="font-size:14px">${g.code}</span>` : `<span class="muted">TBD</span>`)
              : `<span class="muted">â€”</span>`}</td>
        `;
      } else {
        // Mobile Cards
        tr.innerHTML = `
          <td>
            <div class="mRow">
              <div class="mLabel">Ort</div>
              <div class="mValue"><span class="chip ${chipClass}">${g.city}</span></div>

              <div class="mLabel">Court</div>
              <div class="mValue">${g.court}</div>

              <div class="mLabel">Datum</div>
              <div class="mValue">${formatCHDateTime(g.startDate)}</div>

              <div class="mLabel">Zugangscode</div>
              <div class="mValue mCode">${code}</div>
            </div>
          </td>
        `;
      }

      tbody.appendChild(tr);
    }
  }

  function tick(){
    const now = new Date();
    const g = findActive(now);

    if (!g){
      liveWhere.textContent = "â€”";
      liveWhen.textContent = "â€”";
      liveCountdown.textContent = "â€”";
      liveCode.textContent = "â€”";
      renderUpcoming(now, null);
      return;
    }

    const start = g.startDate;
    const until = displayUntil(start);
    const isBefore = now < start;
    const isDuring = now >= start && now < until;

    liveWhere.textContent = `${g.city} Â· ${g.court}`;
    liveWhen.textContent = formatCHDateTime(start);
    liveCode.textContent = (g.city === "BÃ¼lach") ? (g.code || "TBD") : "â€”";

    if (isBefore){
      countdownLabel.textContent = "Start in";
      liveCountdown.textContent = countdownString(start - now);
    } else if (isDuring){
      countdownLabel.textContent = "Aktiv bis 21:00 in";
      liveCountdown.textContent = countdownString(until - now);
    }

    renderUpcoming(now, `${g.city}|${g.start}`);
  }

  tick();
  setInterval(tick, 1000);
  window.addEventListener("resize", () => tick());

  /* ---------- Playful flying balls (weniger BÃ¤lle, Bounce in Viewport-Mitte) ---------- */
  (function initFlyingBalls(){
    const layer = document.getElementById("ballLayer");
    if (!layer) return;

    const prefersReduced = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;
    if (prefersReduced) return;

    const balls = [];
    const MAX_BALLS = 2;          // âœ… halb so viele (vorher 5)
    const SPAWN_EVERY_MS = 2400;  // âœ… ruhigerer Spawn
    const GRAVITY = 0.22;
    const RESTITUTION = 0.82;
    const FRICTION = 0.995;
    const EXIT_AFTER_MS = 5200;

    function rand(min, max){ return Math.random() * (max - min) + min; }

    function spawnBall(){
      if (balls.length >= MAX_BALLS) return;

      const el = document.createElement("div");
      el.className = "flyBall";
      layer.appendChild(el);

      const rect = el.getBoundingClientRect();
      const r = rect.width / 2;

      const w = window.innerWidth;
      const h = window.innerHeight;

      // pro Ball eigene Bounce-Linie irgendwo in der Mitte des Viewports
      const bounceLine = rand(h * 0.50, h * 0.72);

      // Spawn from top/right/left/top-right
      const edge = Math.floor(rand(0, 4));
      let x, y, vx, vy;

      if (edge === 0){
        x = rand(r, w - r);
        y = -r * 2;
        vx = rand(-2.2, 2.2);
        vy = rand(1.6, 3.2);
      } else if (edge === 1){
        x = w + r * 2;
        y = rand(r, h * 0.55);
        vx = rand(-3.8, -2.0);
        vy = rand(0.2, 2.2);
      } else if (edge === 2){
        x = -r * 2;
        y = rand(r, h * 0.55);
        vx = rand(2.0, 3.8);
        vy = rand(0.2, 2.2);
      } else {
        x = w + r * 2;
        y = -r * 2;
        vx = rand(-4.2, -2.3);
        vy = rand(1.5, 3.2);
      }

      const born = performance.now();
      balls.push({ el, x, y, vx, vy, r, born, exiting:false, bounceLine });
      el.style.transform = `translate3d(${x - r}px, ${y - r}px, 0)`;
    }

    function step(){
      const w = window.innerWidth;
      const h = window.innerHeight;
      const now = performance.now();

      for (let i = balls.length - 1; i >= 0; i--){
        const b = balls[i];

        // nach einiger Zeit wieder wegfliegen lassen
        if (!b.exiting && (now - b.born) > EXIT_AFTER_MS){
          b.exiting = true;
          b.vx += rand(-1.0, 1.0);
          b.vy -= rand(1.2, 2.8);
        }

        // physics
        b.vy += GRAVITY;
        b.vx *= FRICTION;
        b.vy *= FRICTION;

        b.x += b.vx;
        b.y += b.vy;

        // Bounce an der (pro Ball) Mid-Viewport-Linie
        const bounceY = b.bounceLine ?? (h * 0.62);
        if (!b.exiting && b.y + b.r > bounceY){
          b.y = bounceY - b.r;
          b.vy = -Math.abs(b.vy) * RESTITUTION;
          b.vx *= 0.985;
        }

        // etwas im Screen halten (links/rechts/top), solange nicht exiting
        if (!b.exiting && b.y - b.r < 0){
          b.y = b.r;
          b.vy = Math.abs(b.vy) * RESTITUTION;
        }
        if (!b.exiting && b.x - b.r < 0){
          b.x = b.r;
          b.vx = Math.abs(b.vx) * RESTITUTION;
        }
        if (!b.exiting && b.x + b.r > w){
          b.x = w - b.r;
          b.vx = -Math.abs(b.vx) * RESTITUTION;
        }

        // render
        b.el.style.transform = `translate3d(${b.x - b.r}px, ${b.y - b.r}px, 0)`;

        // entfernen sobald weit weg (nur wÃ¤hrend exiting)
        const off =
          (b.x + b.r < -140) || (b.x - b.r > w + 140) ||
          (b.y + b.r < -220) || (b.y - b.r > h + 260);

        if (b.exiting && off){
          b.el.remove();
          balls.splice(i, 1);
        }
      }

      requestAnimationFrame(step);
    }

    spawnBall();
    setTimeout(spawnBall, 550);
    setInterval(spawnBall, SPAWN_EVERY_MS);
    requestAnimationFrame(step);
  })();
</script>

</body>
</html>
