<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Padel Dashboard</title>
  <style>
    :root{
      --bg:#f6f2e9;
      --card:#ffffff;
      --ink:#1a1a1a;
      --muted:#5f6a5f;
      --line:rgba(0,0,0,.10);

      --padelGreen:#1f8a5b;
      --clay:#e9a56a;
      --ball:#d8ff3f;
      --ballShadow: rgba(0,0,0,.15);

      --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
      color:var(--ink);
      background:
        radial-gradient(900px 500px at 12% 0%, rgba(47,191,113,.18), transparent 55%),
        radial-gradient(900px 500px at 88% 20%, rgba(233,165,106,.22), transparent 58%),
        linear-gradient(180deg, #faf7f1, var(--bg));
      padding:22px;
    }
    .wrap{max-width:1100px;margin:0 auto}
    .header{
      display:flex;align-items:center;gap:12px;
      margin-bottom:14px;
    }
    /* Tennisball Logo */
    .logoBall{
      width:44px;height:44px;border-radius:999px;
      background: radial-gradient(circle at 30% 28%, #fff, var(--ball) 45%, #b6e400 80%);
      box-shadow: 0 10px 18px var(--ballShadow);
      position:relative;
      border:1px solid rgba(0,0,0,.06);
      flex:0 0 auto;
    }
    .logoBall:before,.logoBall:after{
      content:"";
      position:absolute;inset:6px;
      border-radius:999px;
      border:2px solid rgba(0,0,0,.14);
      clip-path: polygon(0 0, 100% 0, 100% 42%, 0 42%);
      transform: rotate(-18deg);
    }
    .logoBall:after{
      clip-path: polygon(0 58%, 100% 58%, 100% 100%, 0 100%);
      transform: rotate(-18deg);
    }
    h1{margin:0;font-size:22px;letter-spacing:.2px}

    .card{
      background: var(--card);
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: 0 10px 25px rgba(0,0,0,.08);
      overflow:hidden;
    }

    /* LIVE */
    .live{
      position:relative;
      padding:18px;
      border-radius: var(--radius);
      border:1px solid rgba(31,138,91,.18);
      background:
        linear-gradient(180deg, rgba(47,191,113,.12), rgba(233,165,106,.08)),
        #fff;
      overflow:hidden;
      margin-bottom:14px;
    }
    .courtLines{
      position:absolute;inset:-40px;
      opacity:.18;
      pointer-events:none;
      background:
        linear-gradient(90deg, transparent 0 16%, rgba(31,138,91,.35) 16% 16.4%, transparent 16.4% 33%,
                               rgba(31,138,91,.35) 33% 33.4%, transparent 33.4% 66%,
                               rgba(31,138,91,.35) 66% 66.4%, transparent 66.4% 84%,
                               rgba(31,138,91,.35) 84% 84.4%, transparent 84.4% 100%),
        linear-gradient(0deg, transparent 0 20%, rgba(31,138,91,.35) 20% 20.4%, transparent 20.4% 50%,
                              rgba(31,138,91,.35) 50% 50.4%, transparent 50.4% 80%,
                              rgba(31,138,91,.35) 80% 80.4%, transparent 80.4% 100%);
      transform: rotate(-6deg);
    }
    .liveTop{position:relative}
    .liveTitle{
      font-weight:950;
      font-size:17px;
      margin:0;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .liveHint{
      margin-top:6px;
      color:var(--muted);
      font-size:12px;
      position:relative;
    }

    .grid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:12px;
      margin-top:14px;
      position:relative;
    }
    @media (max-width:860px){ .grid{grid-template-columns:1fr} }

    .tile{
      border:1px solid rgba(0,0,0,.08);
      background: rgba(255,255,255,.75);
      border-radius:16px;
      padding:12px 12px;
    }
    .k{color:var(--muted);font-size:11px;margin-bottom:6px}
    .v{font-size:18px;font-weight:950;letter-spacing:.2px}
    .big{font-size:20px}

    .code{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-weight:950;
      letter-spacing:.8px;
      font-size:22px;
    }

    /* TABLE / LIST */
    .tableHead{
      padding:14px 16px 6px 16px;
      display:flex;justify-content:space-between;align-items:flex-end;gap:10px;flex-wrap:wrap;
    }
    .tableTitle{font-weight:950;font-size:16px}
    .tableSub{
      padding:0 16px 10px 16px;
      font-size:12px;color:var(--muted);
    }

    .scroll{max-height:520px;overflow:auto}

    table{
      width:100%;
      border-collapse:separate;
      border-spacing:0;
      border-top:1px solid var(--line);
      background:#fff;
    }
    thead th{
      text-align:left;
      font-size:12px;
      color:var(--muted);
      padding:12px 12px;
      border-bottom:1px solid var(--line);
      background: rgba(31,138,91,.06);
      position:sticky;
      top:0;
      z-index:1;
    }
    tbody td{
      padding:11px 12px;
      border-bottom:1px solid rgba(0,0,0,.06);
      font-size:13px;
      vertical-align:middle;
    }
    tbody tr:hover{background: rgba(47,191,113,.06)}
    tbody tr.highlight{
      background: rgba(216,255,63,.25);
      outline:2px solid rgba(31,138,91,.35);
      outline-offset:-2px;
    }

    .chip{
      display:inline-flex;align-items:center;
      padding:6px 10px;border-radius:999px;
      border:1px solid rgba(0,0,0,.08);
      font-weight:950;font-size:12px;
      background: rgba(31,138,91,.10);
      color:#145a3b;
      white-space:nowrap;
    }
    .chip.buelach{background: rgba(233,165,106,.18); color:#7a3f10;}
    .nowrap{white-space:nowrap}
    .muted{color:var(--muted)}

    /* ---------- MOBILE: Table -> Cards (kein sideways scroll) ---------- */
    @media (max-width: 520px){
      body{padding:16px}
      h1{font-size:20px}

      .v{font-size:19px}
      .big{font-size:21px}
      .code{font-size:20px}

      .scroll{max-height:none; overflow:visible;} /* volle Seite, normal nach unten scroll */
      table, thead, tbody, th, td, tr{display:block;}
      thead{display:none;} /* header weg */
      table{border-top:none;}
      tbody td{
        border:none;
        padding:0;
      }

      /* Jede Zeile als Card */
      tbody tr{
        margin:10px 12px 12px 12px;
        border:1px solid rgba(0,0,0,.10);
        border-radius:16px;
        padding:12px;
        background:#fff;
        box-shadow: 0 8px 18px rgba(0,0,0,.06);
      }
      tbody tr:hover{background:#fff}
      tbody tr.highlight{
        background: rgba(216,255,63,.22);
        outline:2px solid rgba(31,138,91,.30);
        outline-offset:-2px;
      }

      /* Label + Value Layout */
      .mRow{
        display:grid;
        grid-template-columns: 110px 1fr;
        gap:8px 10px;
        align-items:center;
      }
      .mLabel{
        color:var(--muted);
        font-size:11px;
        font-weight:700;
      }
      .mValue{
        font-size:13px;
        font-weight:800;
      }
      .mCode{
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
        font-weight:950;
        letter-spacing:.6px;
      }

      /* City chip a bit smaller */
      .chip{font-size:11px;padding:5px 9px}
    }
  </style>
</head>

<body>
<div class="wrap">

  <div class="header">
    <div class="logoBall" aria-hidden="true"></div>
    <h1>Padel Dashboard</h1>
  </div>

  <!-- LIVE -->
  <div class="card live">
    <div class="courtLines" aria-hidden="true"></div>

    <div class="liveTop">
      <div class="liveTitle">Nächstes Spiel</div>
      <div class="liveHint">Wechselt nach 21:00 am Spieltag automatisch zum nächsten Datum.</div>
    </div>

    <div class="grid">
      <div class="tile">
        <div class="k">Ort & Court</div>
        <div class="v big" id="liveWhere">—</div>
      </div>

      <div class="tile">
        <div class="k">Datum & Zeit</div>
        <div class="v big" id="liveWhen">—</div>
        <div style="margin-top:10px">
          <div class="k" id="countdownLabel">Start in</div>
          <div class="v big" id="liveCountdown">—</div>
        </div>
      </div>

      <div class="tile" style="grid-column:1 / -1">
        <div class="k">Zugangscode</div>
        <div class="code" id="liveCode">—</div>
      </div>
    </div>
  </div>

  <!-- LIST -->
  <div class="card">
    <div class="tableHead">
      <div class="tableTitle">Bevorstehende Spiele</div>
    </div>
    <div class="tableSub">Vergangene Spiele werden automatisch ausgeblendet.</div>

    <div class="scroll">
      <table>
        <thead>
          <tr>
            <th>Ort</th>
            <th>Court</th>
            <th>Datum</th>
            <th>Zugangscode</th>
          </tr>
        </thead>
        <tbody id="tbody"></tbody>
      </table>
    </div>
  </div>

</div>

<script>
  // Daten: ISO lokal (ohne Z)
  const games = [
    // Milandia (Court 3)
    { city:"Milandia", court:"Court 3", start:"2025-12-18T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-01-08T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-01-22T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-02-05T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-02-19T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-03-05T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-03-19T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-04-02T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-04-16T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-04-30T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-05-14T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-05-28T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-06-11T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-06-25T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-07-09T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-07-23T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-08-06T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-08-20T19:00:00", code:"" },
    { city:"Milandia", court:"Court 3", start:"2026-09-03T19:00:00", code:"" },

    // Bülach (Court 1) + Zugangscode
    { city:"Bülach", court:"Court 1", start:"2026-02-12T19:00:00", code:"8411#" },
    { city:"Bülach", court:"Court 1", start:"2026-02-26T19:00:00", code:"6868#" },
    { city:"Bülach", court:"Court 1", start:"2026-03-12T19:00:00", code:"8143#" },
    { city:"Bülach", court:"Court 1", start:"2026-03-26T19:00:00", code:"8126#" },
    { city:"Bülach", court:"Court 1", start:"2026-04-09T19:00:00", code:"5726#" },
    { city:"Bülach", court:"Court 1", start:"2026-04-23T19:00:00", code:"4125#" },
    { city:"Bülach", court:"Court 1", start:"2026-05-07T19:00:00", code:"9478#" },
    { city:"Bülach", court:"Court 1", start:"2026-05-21T19:00:00", code:"5758#" },
    { city:"Bülach", court:"Court 1", start:"2026-06-04T19:00:00", code:"8265#" },
    { city:"Bülach", court:"Court 1", start:"2026-06-18T19:00:00", code:"3703#" },
    { city:"Bülach", court:"Court 1", start:"2026-07-02T19:00:00", code:"2012#" },
    { city:"Bülach", court:"Court 1", start:"2026-07-16T19:00:00", code:"2878#" },
    { city:"Bülach", court:"Court 1", start:"2026-07-30T19:00:00", code:"7170#" },
    { city:"Bülach", court:"Court 1", start:"2026-08-13T19:00:00", code:"9432#" },
    { city:"Bülach", court:"Court 1", start:"2026-08-27T19:00:00", code:"2750#" },
    { city:"Bülach", court:"Court 1", start:"2026-09-10T19:00:00", code:"5646#" },
    { city:"Bülach", court:"Court 1", start:"2026-09-24T19:00:00", code:"6603#" },
    { city:"Bülach", court:"Court 1", start:"2026-10-08T19:00:00", code:"3112#" },
  ];

  // Helpers
  const pad2 = n => String(n).padStart(2,"0");
  const parseLocal = iso => new Date(iso);

  function formatCHDateTime(d){
    return `${pad2(d.getDate())}.${pad2(d.getMonth()+1)}.${d.getFullYear()} ${pad2(d.getHours())}:${pad2(d.getMinutes())}`;
  }

  function countdownString(ms){
    const s = Math.max(0, Math.floor(ms/1000));
    const days = Math.floor(s / 86400);
    const hours = Math.floor((s % 86400) / 3600);
    const mins = Math.floor((s % 3600) / 60);
    const secs = s % 60;

    if (days > 0) return `${days}d ${hours}h ${mins}m ${secs}s`;
    if (hours > 0) return `${hours}h ${mins}m ${secs}s`;
    if (mins > 0) return `${mins}m ${secs}s`;
    return `${secs}s`;
  }

  function displayUntil(startDate){
    const d = new Date(startDate.getTime());
    d.setHours(21,0,0,0);
    return d;
  }

  const sorted = games
    .map(g => ({...g, startDate: parseLocal(g.start)}))
    .sort((a,b) => a.startDate - b.startDate);

  // DOM
  const liveWhere = document.getElementById("liveWhere");
  const liveWhen = document.getElementById("liveWhen");
  const liveCountdown = document.getElementById("liveCountdown");
  const countdownLabel = document.getElementById("countdownLabel");
  const liveCode = document.getElementById("liveCode");
  const tbody = document.getElementById("tbody");

  function findActive(now){
    for (const g of sorted){
      if (now < displayUntil(g.startDate)) return g;
    }
    return null;
  }

  function isMobileCards(){
    return window.matchMedia && window.matchMedia("(max-width: 520px)").matches;
  }

  function renderUpcoming(now, highlightKey){
    tbody.innerHTML = "";
    const upcoming = sorted.filter(g => now < displayUntil(g.startDate));

    if (upcoming.length === 0){
      const tr = document.createElement("tr");
      tr.innerHTML = `<td colspan="4" class="muted">Keine kommenden Spiele in der Liste.</td>`;
      tbody.appendChild(tr);
      return;
    }

    const cards = isMobileCards();

    for (const g of upcoming){
      const tr = document.createElement("tr");
      const key = `${g.city}|${g.start}`;
      if (highlightKey && key === highlightKey) tr.classList.add("highlight");

      const chipClass = g.city === "Bülach" ? "buelach" : "";
      const code = (g.city === "Bülach") ? (g.code || "TBD") : "—";

      if (!cards){
        tr.innerHTML = `
          <td><span class="chip ${chipClass}">${g.city}</span></td>
          <td class="nowrap">${g.court}</td>
          <td class="nowrap">${formatCHDateTime(g.startDate)}</td>
          <td class="nowrap">${g.city === "Bülach"
              ? (g.code ? `<span class="code" style="font-size:14px">${g.code}</span>` : `<span class="muted">TBD</span>`)
              : `<span class="muted">—</span>`}</td>
        `;
      } else {
        // Mobile Cards (kein sideways scroll)
        tr.innerHTML = `
          <td>
            <div class="mRow">
              <div class="mLabel">Ort</div>
              <div class="mValue"><span class="chip ${chipClass}">${g.city}</span></div>

              <div class="mLabel">Court</div>
              <div class="mValue">${g.court}</div>

              <div class="mLabel">Datum</div>
              <div class="mValue">${formatCHDateTime(g.startDate)}</div>

              <div class="mLabel">Zugangscode</div>
              <div class="mValue mCode">${code}</div>
            </div>
          </td>
        `;
      }

      tbody.appendChild(tr);
    }
  }

  function tick(){
    const now = new Date();
    const g = findActive(now);

    if (!g){
      liveWhere.textContent = "—";
      liveWhen.textContent = "—";
      liveCountdown.textContent = "—";
      liveCode.textContent = "—";
      renderUpcoming(now, null);
      return;
    }

    const start = g.startDate;
    const until = displayUntil(start);
    const isBefore = now < start;
    const isDuring = now >= start && now < until;

    liveWhere.textContent = `${g.city} · ${g.court}`;
    liveWhen.textContent = formatCHDateTime(start);
    liveCode.textContent = (g.city === "Bülach") ? (g.code || "TBD") : "—";

    if (isBefore){
      countdownLabel.textContent = "Start in";
      liveCountdown.textContent = countdownString(start - now);
    } else if (isDuring){
      countdownLabel.textContent = "Aktiv bis 21:00 in";
      liveCountdown.textContent = countdownString(until - now);
    }

    renderUpcoming(now, `${g.city}|${g.start}`);
  }

  tick();
  setInterval(tick, 1000);
  window.addEventListener("resize", () => tick()); // damit der Layout-Wechsel sauber ist
</script>

</body>
</html>
